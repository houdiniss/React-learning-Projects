{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Giorgos\\\\Desktop\\\\\\u0395\\u03B3\\u03B3\\u03C1\\u03B1\\u03C6\\u03B1\\\\Courses\\\\React Course\\\\Section 20-starting-project\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport Cart from './components/Cart/Cart';\nimport Layout from './components/Layout/Layout';\nimport Products from './components/Shop/Products';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Notification from './components/UI/Notification.js';\nimport { uiActions } from './store/ui-slice.js';\nimport { cartActions } from './store/cart-slice.js';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet isInitial = true;\nfunction App() {\n  _s();\n  const showCart = useSelector(state => state.ui.cartIsVisible);\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const notification = useSelector(state => state.ui.notification);\n  useEffect(() => {\n    async function fetchCartData() {\n      const response = await fetch('https://backend-for-react-app-default-rtdb.europe-west1.firebasedatabase.app/cart.json');\n      if (!response.ok) {\n        throw new Error('Failed to fetch data.');\n      }\n      ;\n      const data = await response.json();\n      dispatch(cartActions.replaceCart(data));\n    }\n    ;\n    fetchCartData().catch(error => {\n      dispatch(uiActions.showNotification({\n        status: 'error',\n        title: 'Error...',\n        message: 'Fetching cart data failed!'\n      }));\n    });\n  }, [dispatch]);\n  useEffect(() => {\n    async function postCartData() {\n      dispatch(uiActions.showNotification({\n        status: 'pending',\n        title: 'Sending...',\n        message: 'Sending cart data!'\n      }));\n      const response = await fetch('https://backend-for-react-app-default-rtdb.europe-west1.firebasedatabase.app/cart.json', {\n        method: 'PUT',\n        body: JSON.stringify(cart)\n      });\n      if (!response.ok) {\n        throw new Error('Sending cart data failed.');\n      }\n      ;\n      dispatch(uiActions.showNotification({\n        status: 'success',\n        title: 'Success...',\n        message: 'Sent cart data successfully!'\n      }));\n    }\n    ;\n    if (isInitial) {\n      isInitial = false;\n      return;\n    }\n    ;\n    if (cart.changed) {\n      postCartData().catch(error => {\n        dispatch(uiActions.showNotification({\n          status: 'error',\n          title: 'Error...',\n          message: 'Sending cart data failed!'\n        }));\n      });\n    }\n  }, [cart, dispatch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [notification && /*#__PURE__*/_jsxDEV(Notification, {\n      status: notification.status,\n      title: notification.title,\n      message: notification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: [showCart && /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"O9b8bYJxvqj64xnNehdPz6jilpg=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useSelector];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","Cart","Layout","Products","useDispatch","useSelector","Notification","uiActions","cartActions","jsxDEV","_jsxDEV","Fragment","_Fragment","isInitial","App","_s","showCart","state","ui","cartIsVisible","dispatch","cart","notification","fetchCartData","response","fetch","ok","Error","data","json","replaceCart","catch","error","showNotification","status","title","message","postCartData","method","body","JSON","stringify","changed","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Giorgos/Desktop/Εγγραφα/Courses/React Course/Section 20-starting-project/src/App.js"],"sourcesContent":["import { useEffect } from 'react';\nimport Cart from './components/Cart/Cart';\nimport Layout from './components/Layout/Layout';\nimport Products from './components/Shop/Products';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Notification from './components/UI/Notification.js';\nimport { uiActions } from './store/ui-slice.js';\nimport { cartActions } from './store/cart-slice.js';\n\nlet isInitial = true;\n\nfunction App() {\n  const showCart = useSelector((state) => state.ui.cartIsVisible);\n  const dispatch = useDispatch();\n  const cart = useSelector((state) => state.cart);\n  const notification = useSelector(state => state.ui.notification);\n\n  useEffect(() => {\n    async function fetchCartData() {\n      const response = await fetch('https://backend-for-react-app-default-rtdb.europe-west1.firebasedatabase.app/cart.json');\n\n      if(!response.ok) {\n        throw new Error('Failed to fetch data.')\n      };\n\n      const data = await response.json();\n      dispatch(cartActions.replaceCart(data));\n    };\n\n    fetchCartData().catch((error) => {\n      dispatch(uiActions.showNotification({\n        status: 'error',\n        title: 'Error...',\n        message: 'Fetching cart data failed!'\n      }));\n    });\n  } , [dispatch]);\n\n  useEffect(() => {\n    async function postCartData() {\n      dispatch(\n        uiActions.showNotification({\n          status: 'pending',\n          title: 'Sending...',\n          message: 'Sending cart data!'\n      }));\n\n      const response = await fetch('https://backend-for-react-app-default-rtdb.europe-west1.firebasedatabase.app/cart.json',{\n        method: 'PUT',\n        body: JSON.stringify(cart)\n      });\n\n      if(!response.ok) {\n        throw new Error('Sending cart data failed.');\n      };\n\n      dispatch(uiActions.showNotification({\n        status: 'success',\n        title: 'Success...',\n        message: 'Sent cart data successfully!'\n      }));\n    };\n\n    if(isInitial) {\n      isInitial = false;\n      return;\n    };\n    \n    if(cart.changed) {\n      postCartData().catch((error) => {\n        dispatch(uiActions.showNotification({\n          status: 'error',\n          title: 'Error...',\n          message: 'Sending cart data failed!'\n        }));\n      });\n    }\n  } , [cart,dispatch]);\n\n  return (\n    <>\n      {notification && \n        <Notification \n          status={notification.status} \n          title={notification.title} \n          message={notification.message}\n        />\n      }\n      <Layout>\n        {showCart && <Cart />}\n        <Products />\n      </Layout>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}